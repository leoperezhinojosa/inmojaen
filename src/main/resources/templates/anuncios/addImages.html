<!DOCTYPE html>
<html lang="es">

<head>
    <title> INMOJAÉN - Subir Imagenes </title>
    <th:block th:replace="~{fragments/general.html :: headerfiles}"></th:block>
</head>

<body>
    <div>
        <div th:replace="~{fragments/general.html :: navigation}"> </div>

        <hr>
        <h3 class="h3 text-center"> INMOJAÉN - Subir imagenes al anuncio <i class="fa-solid fa-image"></i></h3>
        <hr>

        <form id="uploadForm" action="/api/images/upload" method="post" enctype="multipart/form-data">
            <input type="file" id="fileInput" name="file" hidden />
            <div id="dropArea" style="border: 2px dashed #ccc; padding: 20px; text-align: center; cursor: pointer;">
                Arrastra la imagen para subirla aquí o haz clic para seleccionar la imagen de tu dispositivo.
            </div>
            <button type="submit" style="display: none;">Subir</button>
        </form>

        <script>
            const dropArea = document.getElementById("dropArea");
            const fileInput = document.getElementById("fileInput");

            // Manejar clic para abrir el selector de archivos
            dropArea.addEventListener("click", () => fileInput.click());

            // Manejar arrastrar y soltar
            dropArea.addEventListener("dragover", (e) => {
                e.preventDefault();
                dropArea.style.borderColor = "green";
            });

            dropArea.addEventListener("dragleave", () => {
                dropArea.style.borderColor = "#ccc";
            });

            dropArea.addEventListener("drop", (e) => {
                e.preventDefault();
                dropArea.style.borderColor = "#ccc";
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    fileInput.files = files; // Vincula el archivo al input
                    document.getElementById("uploadForm").submit(); // Envía el formulario automáticamente
                }
            });
        </script>

        <div th:replace="~{fragments/general.html :: footer}"> </div>
    </div>
</body>

</html>