<!DOCTYPE html>
<html lang="es">

<head>
    <title>INMOJAEN: Información del anuncio</title>
    <th:block th:replace="~{fragments/general.html :: headerfiles}"></th:block>
</head>

<body>
    <div>
        <div th:replace="~{fragments/general.html :: navigation}"> </div>
        <br>
        <div class="card">
            <div class="card-header">
                <h4 class="text-center">
                    Anuncio: <i> <span th:text="${anuncio.titulo}"></span></i> <i class="fa-solid fa-house-chimney"></i>
                </h4>
            </div>
            <div class="card-body">
                <!-- Avisos de reserva o venta -->
                <div class="mt-3">
                    <div th:if="${anuncio.reservado}" class="alert alert-warning text-center">
                        <strong>¡Reservado!</strong> Has reservado este inmueble.
                    </div>
                    <div th:if="${anuncio.vendido}" class="alert alert-danger text-center">
                        <strong>¡Vendido!</strong> Has vendido este inmueble.
                    </div>
                </div>

                <!-- Carrusel de Imágenes -->
                <div class="d-flex justify-content-center">
                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel"
                        style="max-width: 600px;">
                        <!-- Indicadores -->
                        <div class="carousel-indicators">
                            <th:block th:each="imagen, index : ${imagenes}">
                                <button type="button" data-bs-target="#carouselExampleIndicators"
                                    data-bs-slide-to="[[${index.index}]]"
                                    th:classappend="${index.index == 0} ? 'active'" aria-current="true"
                                    aria-label="Slide [[${index.index + 1}]]"></button>
                            </th:block>
                        </div>

                        <!-- Carrusel -->
                        <div class="carousel-inner">
                            <th:block th:each="imagen, index : ${imagenes}">
                                <div th:class="'carousel-item ' + (${index.index == 0} ? 'active' : '')">
                                    <img th:src="'http://localhost:8080/' + ${imagen.url}" class="d-block w-100"
                                        alt="Imagen [[${index.index + 1}]]" style="height: 400px; object-fit: cover;">
                                </div>
                            </th:block>
                        </div>

                        <!-- Controles de navegación -->
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Anterior</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Siguiente</span>
                        </button>
                    </div>
                </div>

                <!-- Información del Anuncio -->
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label><b>Descripción:</b></label>
                            <p class="form-control-plaintext" th:text="${anuncio.descripcion}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Precio de venta:</b></label>
                            <p class="form-control-plaintext"
                                th:text="${#numbers.formatDecimal(anuncio.precio, 1, 2) + ' €'}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Superficie:</b></label>
                            <p class="form-control-plaintext"
                                th:text="${#numbers.formatDecimal(anuncio.superficie, 1, 0) + ' m²'}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Habitaciones:</b></label>
                            <p class="form-control-plaintext" th:text="${anuncio.habitaciones}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Baños:</b></label>
                            <p class="form-control-plaintext" th:text="${anuncio.banos}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Dirección:</b></label>
                            <p class="form-control-plaintext" th:text="${anuncio.direccion}"></p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label><b>Usuario anunciante:</b></label>
                            <p class="form-control-plaintext" th:text="${anuncio.vendedor.username}"></p>
                        </div>
                    </div>
                    <div class="text-center m-3">
                        <!-- Reservar anuncio -->
                        <form th:action="@{/usuario/reservar-anuncio/{id}(id=${anuncio.id})}" method="post"
                            style="display:inline;">
                            <button class="btn btn-outline-warning" type="submit"> Reservar propiedad <i
                                    class="fa-solid fa-calendar-check"></i></button>
                        </form>
                        &nbsp;
                        <!-- Vender anuncio -->
                        <form th:action="@{/usuario/vender-anuncio/{id}(id=${anuncio.id})}" method="post"
                            style="display:inline;">
                            <button class="btn btn-outline-success" type="submit"> VENDER PROPIEDAD <i
                                    class="fa-solid fa-dollar-sign"></i></button>
                        </form>
                        <hr>
                        <a class="btn btn-warning mt-3" th:href="@{/usuario/editar-anuncio/{id}(id=${anuncio.id})}"
                            type="submit">
                            Editar anuncio <i class="fa-solid fa-pen-to-square"></i> <i
                                class="fa-solid fa-house-chimney"></i> 
                        </a>&nbsp;
                        <a class="btn btn-info mt-3" href="/activos" type="submit"> Todos los Anuncios <i
                                class="fa-solid fa-house-chimney"></i> </a>&nbsp;
                        <a class="btn btn-primary mt-3" href="/usuario/publicados" type="submit"> Mis Anuncios
                            Publicados <i class="fa-solid fa-house-chimney"></i> <i class="fa-solid fa-user"></i>
                        </a>&nbsp;
                        <a class="btn btn-success mt-3" href="/activos/favoritos" type="submit"> Mis Favoritos <i
                                class="fa-solid fa-heart"></i> </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{fragments/general.html :: footer}"></div>
    </div>
</body>

</html>